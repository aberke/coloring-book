<div class="book-page" ng-if="book.page.name == p.name || main.print">

    <div class="text-content">
        <div class="content-container-wrapper">
            <div class="content-container">
        
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4}'
                    ></div>
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRectangle'
                    ></div>
                </div>
                <p>Some shapes have more symmetry than others.</p>
                
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4}'
                        options='{"autoRotateDegrees":90}'
                    ></div>
                </div>
                <p>If while you blinked, a square was flipped,</p>
 
               <!-- [square with V mirror, 2 diff side strokes, autoreflect] -flip→ [square with V mirror, mirrored, autoreflect] -->
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4, "sideStrokes":[0, 1, 0, 0]}'
                        options='{"autoReflect":"V"}'
                    ></div>
                    <div class="canvas small"
                        canvas-centered-drawing
                        draw-function='drawArrow'
                        function-options='{"textAbove":"flip"}'
                    ></div>
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4, "sideStrokes":[0, 1, 0, 0]}'
                        options='{"mirror":"V", "autoReflect":"V"}'
                    ></div>
                </div>

                <p>or turned a quarter of the way around,</p>

                <!-- [square with 2 diff side strokes, autorotate] -½ turn→ [same square, rotated ½ turn, autorotate] -->
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4, "sideStrokes":[0, 1, 0, 0]}'
                        options='{"autoRotateDegrees":90}'
                    ></div>
                    <div class="canvas small"
                        canvas-centered-drawing
                        draw-function='drawArrow'
                        function-options='{"textAbove":"1/4 turn"}'
                    ></div>
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4, "sideStrokes":[0, 1, 0, 0]}'
                        options='{"autoRotateDegrees":90, "initialRotation":90}'
                    ></div>
                </div>

                <p>you would then still see the same square and not know.</p>
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRegularPolygon'
                        function-options='{"N": 4}'
                        options='{"autoRotateDegrees":90}'
                    ></div>
                </div>

                <br/>

                <p>This is not the case for a rectangle...</p>
                <!-- [rectangle, 2 diff side strokes, autorotate] -½ turn→ [rectangle, rotated by ½ turn] -->
                <div class="text-content-graphic line">
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRectangle'
                        function-options='{}'
                        options='{"autoRotateDegrees":90,"initialRotation":0}'
                    ></div>
                    <div class="canvas small"
                        canvas-centered-drawing
                        draw-function='drawArrow'
                        function-options='{"textAbove":"1/4 turn"}'
                    ></div>
                    <div class='canvas small'
                        canvas-centered-drawing
                        draw-function='drawRectangle'
                        function-options='{}'
                        options='{"autoRotateDegrees":90,"initialRotation":90}'
                    ></div>
                </div>

                <br/>

                <p class="challenge">Challenge: Which of these shapes can be rotated by a ¼ turn without changing in appearance?</p>
            </div>
        </div>
    </div>
    <!-- text-content -->
        
    <!-- coloring-content -->
    <div class="coloring-content">
        <div class="content-container-wrapper">
            <div class="content-container">

                <!-- 6 circular-patterns with order-2, inscribed in squares -->
                <div class="canvas-row">
                    <circular-pattern
                        class="sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="canvas sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="canvas sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="canvas sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth clickable" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern>
                </div>

                <!-- row of 6 C8 shapes inscribed in squares -->
                <div class="canvas-row">
                    <circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth clickable" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"  
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=1
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=1
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern>
                </div>

                <div class="canvas-row">
                    <div class="third clickable canvas" id="square-vs-rectangle-rectangle-coloring-content-0"></div>
                    <div class="third clickable canvas" id="square-vs-rectangle-rectangle-coloring-content-1"></div>
                    <div class="third clickable canvas" id="square-vs-rectangle-rectangle-coloring-content-2"></div>
                </div>

                <!-- row of 6 C8 shapes inscribed in squares -->
                <div class="canvas-row">
                    <circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth clickable" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"  
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=1
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=1
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=8
                        slices-count=1
                        levels=2
                        margin=0
                        mirror-lines=2
                        inscribed="square"
                    ></circular-pattern>
                </div>
                
                <!-- 6 circular-patterns with order-2, inscribed in squares -->
                <div class="canvas-row">
                    <circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth"
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern><circular-pattern
                        class="sixth" 
                        with-redraw
                        rotations=2
                        initial-rotation=90
                        slices-count=2
                        levels=2
                        margin=0
                        mirror-lines=1
                        inscribed="square"
                    ></circular-pattern>
                </div>

                <script type="text/javascript-lazy">
                "use strict";

                // use the same slices to generate circular tesselations with rotations
                // these patterns sit next to each other on separate canvases/papers

                // put the variables for circular-patterns in here
                var squareVsRectangle_coloring = {
                    canvasList: [
                    {
                        paper: new Raphael("square-vs-rectangle-rectangle-coloring-content-0"),
                        options: {
                            levels: 2,
                            withReflection: true,
                            rotations: 2,
                        },
                    }, {
                        paper: new Raphael("square-vs-rectangle-rectangle-coloring-content-1"),
                        options: {
                            levels: 2,
                            withReflection: true,
                            rotations: 4,
                        },
                    }, {
                        paper: new Raphael("square-vs-rectangle-rectangle-coloring-content-2"),
                        options: {
                            levels: 2,
                            withReflection: true,
                            rotations: 2,
                        },
                    }]
                };

                // get the slices to use
                // ASSUMPTION: all the canvases have the same size, and therefore the same origin
                squareVsRectangle_coloring.origin = getCanvasCenter(squareVsRectangle_coloring.canvasList[0].paper);

                squareVsRectangle_coloring.diameter = Math.min(squareVsRectangle_coloring.canvasList[0].paper.getSize().width, squareVsRectangle_coloring.canvasList[0].paper.getSize().height) - 25;

                // wraps the drawing in a function that can be called onclick to redraw
                // since this function generates the paths randomly, each redraw creates new drawings
                squareVsRectangle_coloring.redraw = function() {
                    // generate first circular pattern and use its slices to generate the others

                    // clear out the old slices pathList if this is a redraw
                    squareVsRectangle_coloring.slicesPathList = null;

                    squareVsRectangle_coloring.canvasList.forEach(function(canvas, index) {

                        canvas.paper.clear();

                        if (!squareVsRectangle_coloring.slicesPathList) {
                            // generate circular pattern and at the same time
                            // get the slices pathList from it to reuse for the other patterns
                            canvas.options.slicesPathList = null;
                            canvas.circularPattern = new CircularPattern(canvas.paper, squareVsRectangle_coloring.origin, squareVsRectangle_coloring.diameter, canvas.options);


                            // get the slices pathList
                            // so that they can be used to generate the other circular Patterns
                            squareVsRectangle_coloring.slicesPathList = canvas.circularPattern.slicesPathList;
                        } else {
                            canvas.options.slicesPathList = squareVsRectangle_coloring.slicesPathList;
                            canvas.circularPattern = new CircularPattern(canvas.paper, squareVsRectangle_coloring.origin, squareVsRectangle_coloring.diameter, canvas.options);
                        }
                    });
                };
                // add event listener to redraw upon click
                squareVsRectangle_coloring.canvasList.forEach(function(canvas, index) {
                        canvas.paper.canvas.addEventListener('mouseup', squareVsRectangle_coloring.redraw);
                    });

                // draw for the first time
                squareVsRectangle_coloring.redraw();

                </script>
            </div>
            <p class="design-caption">shapes with ½ turns and shapes with ¼ turns</p>
        </div>
    </div>
</div>
